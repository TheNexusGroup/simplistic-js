<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Simplistic.js</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1f2937;
        }
        
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: white;
            border-right: 1px solid #e5e7eb;
            z-index: 100;
        }
        
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #6b7280;
            cursor: pointer;
            border-radius: 8px;
            margin: 4px 16px;
            transition: all 0.2s ease;
        }
        
        .nav-item:hover {
            background: #f3f4f6;
            color: #374151;
        }
        
        .nav-item.active {
            background: #eff6ff;
            color: #2563eb;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #e5e7eb;
            transition: all 0.2s ease;
        }
        
        .stat-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .chart-placeholder {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 200px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
        }
        
        .table-header {
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .table-row {
            border-bottom: 1px solid #f3f4f6;
            transition: background 0.2s ease;
        }
        
        .table-row:hover {
            background: #f9fafb;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .badge.success { background: #d1fae5; color: #065f46; }
        .badge.warning { background: #fef3c7; color: #92400e; }
        .badge.error { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>
    <script type="module">
        import { app, div, h1, h2, h3, h4, p, button, input, nav, section } from '../lib/src/simplest.js'
        import { table, select, modal, span, a } from '../lib/src/extended.js'
        import { state } from '../lib/src/state.js'
        
        app(() => {
            const activeNav = state('overview')
            const selectedPeriod = state('7d')
            
            // Sidebar Navigation
            div({ className: 'sidebar' },
                // Logo section
                div({ pad: [30, 20, 30, 20], borderBottom: '1px solid #e5e7eb' },
                    div({ row: true, center: true, gap: 12 },
                        div({
                            width: 40,
                            height: 40,
                            bg: '#2563eb',
                            rounded: 8,
                            center: true,
                            color: 'white',
                            bold: true,
                            size: 18
                        }, 'ðŸ’³'),
                        h2('Dashboard', { margin: 0, color: '#1f2937' })
                    )
                ),
                
                // Navigation items
                div({ pad: [20, 0] },
                    createNavItem('ðŸ“Š', 'Overview', 'overview', activeNav),
                    createNavItem('ðŸ’°', 'Payments', 'payments', activeNav),
                    createNavItem('ðŸ‘¥', 'Customers', 'customers', activeNav),
                    createNavItem('ðŸ“ˆ', 'Analytics', 'analytics', activeNav),
                    createNavItem('âš™ï¸', 'Settings', 'settings', activeNav)
                ),
                
                // User section
                div({
                    style: {
                        position: 'absolute',
                        bottom: 0,
                        left: 0,
                        right: 0,
                        padding: '20px',
                        borderTop: '1px solid #e5e7eb'
                    }
                },
                    div({ row: true, center: true, gap: 12 },
                        div({
                            width: 36,
                            height: 36,
                            bg: '#10b981',
                            rounded: '50%',
                            center: true,
                            color: 'white',
                            bold: true,
                            size: 14
                        }, 'JD'),
                        div({ col: true },
                            p('John Doe', { margin: 0, size: 14, bold: true }),
                            p('john@example.com', { margin: 0, size: 12, color: '#6b7280' })
                        )
                    )
                )
            )
            
            // Main Content
            div({ className: 'main-content' },
                // Header
                div({
                    bg: 'white',
                    pad: [30, 40],
                    borderBottom: '1px solid #e5e7eb',
                    row: true,
                    between: true,
                    center: true
                },
                    div({},
                        h1('Dashboard Overview', { margin: 0 }),
                        p('Welcome back! Here\'s what\'s happening with your business.', {
                            color: '#6b7280',
                            margin: [5, 0, 0, 0]
                        })
                    ),
                    
                    div({ row: true, gap: 15, center: true },
                        select([
                            { value: '7d', label: 'Last 7 days' },
                            { value: '30d', label: 'Last 30 days' },
                            { value: '90d', label: 'Last 90 days' }
                        ], {
                            value: selectedPeriod.value,
                            onChange: (value) => selectedPeriod.value = value,
                            bg: 'white',
                            border: '1px solid #d1d5db',
                            rounded: 6,
                            pad: [8, 12]
                        }),
                        
                        button('Export Data', {
                            bg: '#2563eb',
                            color: 'white',
                            pad: [10, 20],
                            rounded: 6,
                            onClick: () => exportData()
                        })
                    )
                ),
                
                // Stats Grid
                div({ pad: 40 },
                    div({
                        style: {
                            display: 'grid',
                            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                            gap: '24px',
                            marginBottom: '40px'
                        }
                    },
                        createStatCard('ðŸ’°', 'Total Revenue', '$124,350', '+12.5%', 'success'),
                        createStatCard('ðŸ“Š', 'Total Orders', '1,245', '+8.2%', 'success'),
                        createStatCard('ðŸ‘¥', 'New Customers', '89', '-2.4%', 'error'),
                        createStatCard('ðŸ”„', 'Conversion Rate', '3.24%', '+0.8%', 'success')
                    ),
                    
                    // Charts Section
                    div({
                        style: {
                            display: 'grid',
                            gridTemplateColumns: '2fr 1fr',
                            gap: '24px',
                            marginBottom: '40px'
                        }
                    },
                        // Revenue Chart
                        div({ bg: 'white', pad: 24, rounded: 12, border: '1px solid #e5e7eb' },
                            h3('Revenue Overview', { margin: [0, 0, 20, 0] }),
                            div({ className: 'chart-placeholder' },
                                p('ðŸ“ˆ Interactive Revenue Chart', { margin: 0, size: 18 })
                            )
                        ),
                        
                        // Top Countries
                        div({ bg: 'white', pad: 24, rounded: 12, border: '1px solid #e5e7eb' },
                            h3('Top Countries', { margin: [0, 0, 20, 0] }),
                            div({ col: true, gap: 15 },
                                createCountryItem('ðŸ‡ºðŸ‡¸', 'United States', '45.2%', '$45,230'),
                                createCountryItem('ðŸ‡¬ðŸ‡§', 'United Kingdom', '23.1%', '$23,100'),
                                createCountryItem('ðŸ‡¨ðŸ‡¦', 'Canada', '18.7%', '$18,700'),
                                createCountryItem('ðŸ‡©ðŸ‡ª', 'Germany', '13.0%', '$13,000')
                            )
                        )
                    ),
                    
                    // Recent Transactions Table
                    div({ bg: 'white', rounded: 12, border: '1px solid #e5e7eb' },
                        div({ pad: [24, 24, 0, 24], row: true, between: true, center: true },
                            h3('Recent Transactions', { margin: 0 }),
                            button('View All', {
                                bg: 'transparent',
                                color: '#2563eb',
                                border: 'none',
                                clickable: true
                            })
                        ),
                        
                        createTransactionTable()
                    )
                )
            )
        })
        
        function createNavItem(icon, label, key, activeState) {
            const item = div({
                className: activeState.value === key ? 'nav-item active' : 'nav-item',
                onClick: () => activeState.value = key
            })
            
            // Update classes reactively
            activeState.subscribe(active => {
                item.className = active === key ? 'nav-item active' : 'nav-item'
            })
            
            const iconEl = span(icon, { 
                size: 18,
                margin: [0, 12, 0, 0],
                width: 20,
                display: 'inline-block'
            })
            
            const labelEl = span(label, { size: 14, fontWeight: '500' })
            
            item.appendChild(iconEl)
            item.appendChild(labelEl)
            
            return item
        }
        
        function createStatCard(icon, title, value, change, changeType) {
            return div({ className: 'stat-card' },
                div({ row: true, between: true, margin: [0, 0, 16, 0] },
                    span(icon, { size: 24 }),
                    span(change, {
                        className: `badge ${changeType}`,
                        size: 12,
                        bold: true
                    })
                ),
                
                h4(title, { 
                    margin: [0, 0, 8, 0], 
                    color: '#6b7280',
                    size: 14,
                    fontWeight: '500'
                }),
                
                h2(value, { 
                    margin: 0, 
                    color: '#1f2937',
                    size: 32,
                    fontWeight: 'bold'
                })
            )
        }
        
        function createCountryItem(flag, country, percentage, revenue) {
            return div({ row: true, between: true, center: true },
                div({ row: true, center: true, gap: 12 },
                    span(flag, { size: 20 }),
                    div({ col: true },
                        p(country, { margin: 0, size: 14, fontWeight: '500' }),
                        p(percentage, { margin: 0, size: 12, color: '#6b7280' })
                    )
                ),
                p(revenue, { margin: 0, size: 14, fontWeight: '600' })
            )
        }
        
        function createTransactionTable() {
            const transactions = [
                { id: 'TX-001', customer: 'John Smith', email: 'john@example.com', amount: '$2,450.00', status: 'success', date: '2024-01-15' },
                { id: 'TX-002', customer: 'Sarah Johnson', email: 'sarah@example.com', amount: '$1,200.00', status: 'success', date: '2024-01-15' },
                { id: 'TX-003', customer: 'Mike Wilson', email: 'mike@example.com', amount: '$890.00', status: 'warning', date: '2024-01-14' },
                { id: 'TX-004', customer: 'Emily Davis', email: 'emily@example.com', amount: '$3,100.00', status: 'success', date: '2024-01-14' },
                { id: 'TX-005', customer: 'David Brown', email: 'david@example.com', amount: '$750.00', status: 'error', date: '2024-01-13' }
            ]
            
            return table({
                headers: ['Transaction ID', 'Customer', 'Amount', 'Status', 'Date', 'Actions'],
                rows: transactions.map(tx => [
                    tx.id,
                    createCustomerCell(tx.customer, tx.email),
                    tx.amount,
                    createStatusBadge(tx.status),
                    tx.date,
                    createActionsCell(tx.id)
                ])
            }, {
                width: '100%',
                rounded: 0
            })
        }
        
        function createCustomerCell(name, email) {
            return div({ col: true },
                p(name, { margin: 0, size: 14, fontWeight: '500' }),
                p(email, { margin: 0, size: 12, color: '#6b7280' })
            )
        }
        
        function createStatusBadge(status) {
            const statusMap = {
                success: { text: 'Completed', class: 'success' },
                warning: { text: 'Pending', class: 'warning' },
                error: { text: 'Failed', class: 'error' }
            }
            
            const { text, class: className } = statusMap[status]
            
            return span(text, {
                className: `badge ${className}`
            })
        }
        
        function createActionsCell(transactionId) {
            return div({ row: true, gap: 8 },
                button('View', {
                    bg: 'transparent',
                    color: '#2563eb',
                    border: 'none',
                    size: 12,
                    clickable: true,
                    onClick: () => viewTransaction(transactionId)
                }),
                button('Refund', {
                    bg: 'transparent',
                    color: '#dc2626',
                    border: 'none',
                    size: 12,
                    clickable: true,
                    onClick: () => refundTransaction(transactionId)
                })
            )
        }
        
        function viewTransaction(id) {
            const content = div({ col: true, gap: 20 },
                h3(`Transaction Details - ${id}`, { margin: 0 }),
                
                div({ row: true, gap: 40 },
                    div({ col: true, gap: 15, flex: 1 },
                        div({},
                            h4('Customer Information', { margin: [0, 0, 10, 0] }),
                            p('John Smith', { margin: 0, fontWeight: '500' }),
                            p('john@example.com', { margin: 0, color: '#6b7280' })
                        ),
                        
                        div({},
                            h4('Payment Method', { margin: [0, 0, 10, 0] }),
                            p('Visa ending in 4242', { margin: 0 })
                        )
                    ),
                    
                    div({ col: true, gap: 15, flex: 1 },
                        div({},
                            h4('Amount', { margin: [0, 0, 10, 0] }),
                            h2('$2,450.00', { margin: 0, color: '#10b981' })
                        ),
                        
                        div({},
                            h4('Status', { margin: [0, 0, 10, 0] }),
                            span('Completed', { className: 'badge success' })
                        )
                    )
                ),
                
                div({ row: true, gap: 15, margin: [20, 0, 0, 0] },
                    button('Send Receipt', {
                        primary: true,
                        bg: '#2563eb',
                        color: 'white',
                        pad: [10, 20],
                        rounded: 6
                    }),
                    button('Process Refund', {
                        bg: '#dc2626',
                        color: 'white',
                        pad: [10, 20],
                        rounded: 6
                    })
                )
            )
            
            modal(content, {
                title: 'Transaction Details',
                size: 'medium'
            })
        }
        
        function refundTransaction(id) {
            alert(`Processing refund for transaction ${id}`)
        }
        
        function exportData() {
            alert('Exporting data... (This would trigger a real export in a production app)')
        }
    </script>
</body>
</html>